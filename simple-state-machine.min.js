function Simple_state_machine(d,b){function c(a){if(!e(a))throw"Can't "+a;b[a].to&&(c.current=b[a].to)}function e(a){a=b[a]?b[a].from:" ";return!a||-1!==(" "+a+" ").indexOf(" "+c.current+" ")}c.current=b?d:"none";b||(b=d);c.can=e;c.events=b;return c}